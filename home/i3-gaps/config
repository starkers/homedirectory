# Set mod variable to super key
set $mod Mod4

# Turn borders off
for_window [class=".*"] border pixel 3

# Change gap size
gaps outer 4
gaps inner 20

# Drag floating windows
floating_modifier $mod

# Start a URxvt terminal instance
bindsym $mod+Return exec /home/starkers/.bin/tmux-term

# # vscode, files, browser, notes shortcuts
# bindsym $mod+c exec code
# bindsym $mod+n exec thunar
# bindsym $mod+t exec typora
# bindsym $mod+b exec firefox

# Kill focused window
bindsym $mod+w kill
bindsym $mod+Shift+w exec nitrogen --random ~/.config/i3/wallpapers

focus_wrapping no

# # Bind to rofi wmenu
# bindsym $mod+Shift+w exec rofi -show -theme clean -icon-theme candy-icons

# Start rofi drun menu
bindsym $mod+d exec ~/.bin/rof

# Bind to suckless lockscreen
bindsym --release $mod+l exec betterlockscreen -l dim -t "u No GO here\!"

# Set up screenshots and partial screenshots
bindsym --release Shift+Print exec flameshot full -c
bindsym --release Print exec flameshot gui
bindsym $mod+space exec copyq show

# Bind audio keys to pactl volume control
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume 0 +3%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume 0 -3%
bindsym XF86AudioMute exec pactl set-sink-mute 0 toggle

# # Bind brightness keys to baclight interface
# bindsym XF86MonBrightnessUp exec --no-startup-id sudo light -A 5
# bindsym XF86MonBrightnessDown exec --no-startup-id sudo light -U 5

# Move focus with the arrow keys
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move windows with shift + arrow keys
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Split in horizontal orientation
bindsym $mod+h split h

# Split in vertical orientation
bindsym $mod+v split v

# Enter fullscreen mode for the focused container
bindsym $mod+f fullscreen

# Change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed
bindsym $mod+e layout toggle split

# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# Change focus between tiling / floating windows
# bindsym $mod+space focus mode_toggle

# Focus the parent container
bindsym $mod+a focus parent # (opt. child)

# Bind keys to switch to next workspace
bindsym $mod+bracketright workspace next
bindsym $mod+bracketleft workspace prev

# Switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# Reload the configuration file
bindsym $mod+Shift+c reload

bindsym $mod+Shift+r restart

# Exit i3
bindsym $mod+Shift+e exec "i3-msg exit"
# bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"
#

# Add resize keybindings in place of mode
bindsym $mod+Control+Left resize shrink width 10 px or 10
bindsym $mod+Control+Down resize grow height 10 px or 10
bindsym $mod+Control+Up resize shrink height 10 px or 10
bindsym $mod+Control+Right resize grow width 10 px or 10

bindsym $mod+Shift+Control+Left resize shrink width 1 px or 1
bindsym $mod+Shift+Control+Down resize grow height 1 px or 1
bindsym $mod+Shift+Control+Up resize shrink height 1 px or 1
bindsym $mod+Shift+Control+Right resize grow width 1 px or 1

# mpv music controller bindings
set $controller ~/Scripts/mpv-controller.sh
bindsym $mod+Shift+P exec $controller pause
bindsym $mod+Shift+bracketleft exec $controller prev
bindsym $mod+Shift+bracketright exec $controller next
bindsym $mod+Shift+semicolon exec $controller skip -10
bindsym $mod+Shift+apostrophe exec $controller skip 10
bindsym $mod+Shift+comma exec $controller skipper -5
bindsym $mod+Shift+period exec $controller skipper 5
bindsym $mod+Shift+m exec $controller start
bindsym $mod+Shift+l exec $controller stop
bindsym $mod+Shift+o exec $controller info
bindsym $mod+Shift+minus exec $controller vol -10
bindsym $mod+Shift+equal exec $controller vol 10

# Always float certain windows

for_window [class="blueman-manager"] floating enable
for_window [class="copyq"]           floating enable
for_window [class="flameshot"]       floating enable
for_window [class="mpv"]             floating enable
for_window [class="zoom"]            floating enable

# # Make sure fonts are loaded right
# exec_always xset +fp /home/kai/.fonts/
# exec_always xset fp rehash

# # Run startup wallpaper script
# exec_always bash -c "feh --bg-fill $(cat ~/Scripts/default-bg.txt | tr -d '\n')"

# # Allow scripts to interface with dbus
# exec_always ~/Scripts/Xdbus.sh

# Start notification daemon
exec_always --no-startup-id dunst

# # Enable tap to click - will need to change input
# # device id and property number. See [link] for more
# exec_always xinput set-prop 12 284 1 > /dev/null 2>&1
#
exec_always xinput set-prop 12 318 1 > /dev/null 2>&1
# exec_always sh -c "feh --bg-fill ~/.config/i3/wallpapers/default"
# exec_always --no-startup-id "nitrogen --restore"
# sh -c "feh --bg-fill ~/.config/i3/wallpapers/default"

# # Startup daemons for compositor and status bar
exec_always --no-startup-id sh -c "sleep 2 ; pkill picom; picom --no-use-damage"
# exec_always --no-startup-id sh -c "sleep 2 ; ${HOME}/.config/polybar/launch.sh"
exec_always --no-startup-id sh -c "sleep 1 ; ${HOME}/.screenlayout/default"
exec_always --no-startup-id "nm-applet"
exec_always --no-startup-id "blueman-applet"
exec_always --no-startup-id "copyq"

# clear capslock
exec_always --no-startup-id xmodmap -e "clear lock"
# set CapsLock -> Esc
exec_always --no-startup-id xmodmap -e "keycode 66 = Escape NoSymbol Escape"

bindsym $mod+p exec "${HOME}/.config/polybar/launch.sh"
# # Increase screen contrast (disable for better displays)
# exec_always --no-startup-id xrandr --output eDP --gamma 0.8:0.8:0.8

# # Use URxvt settings from Xresources
# exec_always --no-startup-id xrdb ~/.Xresources

bindsym $mod+Tab exec perl /home/starkers/.config/i3/scripts/cyclewindows.pl

bindsym XF86MonBrightnessDown exec --no-startup-id /home/starkers/.config/i3/scripts/backlight.sh -dec 2
bindsym XF86MonBrightnessUp   exec --no-startup-id /home/starkers/.config/i3/scripts/backlight.sh -inc 2


bindsym $mod+period      gaps inner current plus  3
bindsym $mod+comma       gaps inner current minus 3



set $mode_resize resize
bindsym $mod+r mode "$mode_resize"
mode "$mode_resize" {
    bindsym Left  resize shrink width  4 px or 2 ppt
    bindsym Down  resize grow   height 4 px or 2 ppt
    bindsym Up    resize shrink height 4 px or 2 ppt
    bindsym Right resize grow   width  4 px or 2 ppt

    bindsym Shift+Left  resize shrink width  8 px or 4 ppt
    bindsym Shift+Down  resize grow   height 8 px or 4 ppt
    bindsym Shift+Up    resize shrink height 8 px or 4 ppt
    bindsym Shift+Right resize grow   width  8 px or 4 ppt

    bindsym s mode "default", exec --no-startup-id $HOME/.config/i3/scripts/slopsize.sh

    bindsym 1 mode "default", resize set 1000 600
    bindsym 2 mode "default", resize set 1500 600
    bindsym 3 mode "default", resize set 1200 1000

    bindsym Return mode "default"
    bindsym Escape mode "default"
}



bindsym $mod+Shift+g exec "pkill picom; gaps inner all set $inner; gaps outer all set $outer; picom"
bindsym $mod+g exec "pkill picom; gaps inner all set 0; gaps outer all set 0; picom"
